<!DOCTYPE html>
<html>
	<head>
		<title>SwingMap</title>
		<meta charset="UTF-8"/>
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
		<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
		<link rel="icon" type="image/png" href="<?php echo HOST;?>/view/img/favicon.png"/>
		<link rel="stylesheet" type="text/css" href="<?php echo HOST;?>/view/css/swingmap.css"/>
		<link rel="stylesheet" media="screen" href="<?php echo HOST;?>/view/css/bootstrap.min.css">
		<link rel="stylesheet" media="screen" href="<?php echo HOST;?>/view/css/bootstrap-datetimepicker.min.css">
		<link rel="stylesheet" media="screen" href="<?php echo HOST;?>/view/fancybox/jquery.fancybox.css">
	</head>
	<body>
		<div id="show_control"><i id="arrow" class="icon-chevron-down"></i></div>
		<div id="map_control">
			<div id="info" class="alert alert-info">
				Chose a interval to see the active users in this period [time-interval,time].
				<div>You can also click <a href="<?php echo HOST;?>/simulator" target="_blank">here</a> to simulate new datas.</div>
				<div><i class="icon-map-marker"></i> setMarkers/refresh <i class="icon-play"></i> start live mode <i class="icon-pause"></i> stop live mode <i class="icon-backward"></i> look back</div>
				<div><span id="result"></span><span id="showtime"></span></div>
			</div>
			<div id="options">
				Device: 
				<select id="device" class="input-small">
					<option value="">all</option>
					<?php
						foreach($device_array as $value)
							echo "<option value='".$value."'>".$value."</option>";
					?>
				</select>
				Server:
				<select id="server" class="input-small">
					<option value="">all</option>
					<?php 
						foreach($server_array as $value)
							echo "<option value='".$value."'>".$value."</option>";
					?>
				</select>
				Marker Style:
				<select id="markerStyleOption" class="input-small">
					<option value="color">color pin</option>
					<option value="icon">png icon</option>
					<option value="svg">svg icon</option>
					<option value="circle">circle</option>
				</select>
				Interval:
				<select id="interval" class="input-small">
					<option value="10">10 s</option>
					<option value="30">30 s</option>
					<option value="60" selected>1 min</option>
					<option value="300">5 min</option>
					<option value="600">10 min</option>
					<option value="900">15 min</option>
					<option value="1800">30 min</option>
					<option value="3600">1 h</option>
					<option value="86400">1 day</option>
				</select>
				Refresh Frequency:
				<select id="frequency" class="input-small">
					<option value="10000">1/10s</option>
					<option value="30000" selected>1/30s</option>
					<option value="60000">1/1min</option>
				</select>
			</div>
			<button class="btn" id="setMarkers" type="button"><i class="icon-map-marker"></i></button>
			<div class="btn-group" data-toggle="buttons-radio">
				<button class="btn btn-info" id="backward" type="button"><i class="icon-backward"></i></button>
				<button class="btn btn-success" id="play" type="button"><i class="icon-play"></i></button>
				<button class="btn btn-warning" id="pause" type="button"><i class="icon-pause"></i></button>
			</div>
			<div id="datetimepicker" class="input-append">
				<input id="datetime" data-format="yyyy-MM-dd hh:mm:ss" type="text"></input>
				<span class="add-on">
					<i data-time-icon="icon-time" data-date-icon="icon-calendar"></i>
				</span>
			</div>
			<a id="fancybox-button" href="<?php echo HOST_CHART; ?>">
                <button class="btn" type="button"><i class="icon-picture"></i></button>
            </a>
		</div>
		<div id="map_canvas"></div>
	</body>
	<script
		src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCEDxb7J_vARiE7CH8NAih35FXpPipQ0bA&sensor=false&libraries=visualization">
	</script>
	<script type="text/javascript" src="<?php echo HOST;?>/view/js/jquery-1.10.1.min.js"></script>
	<script type="text/javascript" src="<?php echo HOST;?>/view/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="<?php echo HOST;?>/view/js/bootstrap-datetimepicker.min.js"></script>
	<script type="text/javascript" src="<?php echo HOST;?>/view/fancybox/jquery.fancybox.js"></script>
	<script type="text/javascript" src="<?php echo HOST;?>/view/js/swingmap.js"></script>
	<script type="text/javascript">
		google.maps.visualRefresh = true;
		// parameters initialization 
		var map;
		var map_id = "map_canvas";
		var map_zoom = 6;
		var map_center_lat = 48.583;
		var map_center_lng = 7.750;
		var styles = [
		{
			stylers: [
				{ hue: "#D9EDF7" },
				{ saturation: -20 }
			]
		},{ 
			"featureType": "road", 
			"stylers": [ 
				{ "visibility": "off" } 
			] 
		},{ 
			"featureType": "landscape.man_made", 
			"stylers": [ 
				{ "visibility": "off" } 
			] 
		},{ 
			"featureType": "landscape.natural.terrain", 
			"stylers": [ 
				{ "visibility": "off" }
			] 
		},{ 
			"featureType": "poi", 
			"stylers": [ 
				{ "visibility": "off" } 
			] 
		},{ 
			"featureType": "transit", 
			"stylers": [ 
				{ "visibility": "off" } 
			] 
		}
		];

		var autoRefreshFreq = 30000;
		var geojsonUrl = "<?php echo HOST;?>/controller/geojson.php";
		var imgUrl = "<?php echo HOST;?>/view/img/";
		$(document).ready(function() {
			$("#fancybox-button").fancybox({
					'width'             : 500,
					'scrolling'         : 'no',
					'transitionIn'      : 'fade',
					'transitionOut'     : 'fade',
					'type'              : 'iframe',
					'showCloseButton'   : false,
					'enableEscapeButton': false,
					'hideOnOverlayClick': false
				});
		});
	</script>
</html>